# ==========================================
# 服务配置
# ==========================================
PORT=3000
NODE_ENV=development

# ==========================================
# 数据库配置 (PostgreSQL)
# ==========================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_password
DB_NAME=paper_ai
DB_CONNECTION_LIMIT=10

# ==========================================
# JWT配置
# ==========================================
JWT_SECRET=your_jwt_secret_key_change_in_production
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your_refresh_secret_key
JWT_REFRESH_EXPIRES_IN=30d

# ==========================================
# OpenRouter AI配置
# ==========================================
OPENROUTER_API_KEY=your_openrouter_api_key
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# AI模型选择
OPENROUTER_MODEL_DEFAULT=openai/gpt-3.5-turbo
OPENROUTER_MODEL_PREMIUM=openai/gpt-4-turbo
OPENROUTER_MODEL_CHEAP=openai/gpt-3.5-turbo

# AI调用参数
AI_TEMPERATURE=0.7
AI_MAX_TOKENS=2000
AI_TIMEOUT=30000

# ==========================================
# 代理配置（国内使用）
# ==========================================
HTTP_PROXY=http://127.0.0.1:7890
HTTPS_PROXY=http://127.0.0.1:7890

# ==========================================
# CORS和前端配置
# ==========================================
CORS_ORIGIN=http://localhost:5173
FRONTEND_URL=http://localhost:5173

# ==========================================
# AI积分消耗配置
# ==========================================
CREDITS_COST_POLISH=15
CREDITS_COST_OUTLINE=10
CREDITS_COST_GRAMMAR=20
CREDITS_COST_REFERENCES=10
CREDITS_COST_REWRITE=50
CREDITS_COST_DISCUSSION=20

# ==========================================
# 运营奖励配置
# ==========================================
REWARD_REGISTRATION=100
REWARD_DAILY_CHECKIN=5
REWARD_INVITER=100
REWARD_INVITEE=50

# ==========================================
# 分页配置
# ==========================================
PAGINATION_DEFAULT_LIMIT=10
PAGINATION_MAX_LIMIT=100

# ==========================================
# 限流配置(次/分钟)
# ==========================================
# 免费用户
RATE_LIMIT_FREE_AI=10
RATE_LIMIT_FREE_UPLOAD=5
RATE_LIMIT_FREE_PAPER=20

# VIP用户
RATE_LIMIT_VIP_AI=30
RATE_LIMIT_VIP_UPLOAD=20
RATE_LIMIT_VIP_PAPER=-1

# ==========================================
# 文本长度限制
# ==========================================
LIMIT_PAPER_TITLE=200
LIMIT_POLISH_TEXT=5000
LIMIT_GRAMMAR_TEXT=10000
LIMIT_REWRITE_TEXT=3000
LIMIT_DISCUSSION_Q=500
LIMIT_DISCUSSION_CTX=2000
LIMIT_CHANGE_SUMMARY=100

# ==========================================
# 邀请码配置
# ==========================================
INVITE_CODE_LENGTH=9
INVITE_CODE_SEPARATOR=-
INVITE_CODE_SEGMENT=3
INVITE_CODE_CHARS=ABCDEFGHJKLMNPQRSTUVWXYZ23456789

# ==========================================
# 密码策略
# ==========================================
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBER=true
PASSWORD_REQUIRE_SPECIAL=false

# ==========================================
# 版本管理配置
# ==========================================
MAX_VERSIONS_PER_PAPER=50
AUTO_SAVE_INTERVAL=300
ENABLE_AUTO_SAVE=true

# ==========================================
# 签到配置
# ==========================================
MAX_STREAK_DAYS=365
STREAK_BONUS_THRESHOLD=7
STREAK_BONUS_CREDITS=10

# ==========================================
# 文件上传配置
# ==========================================
UPLOAD_MAX_FILE_SIZE=10485760
UPLOAD_ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/gif,image/webp
UPLOAD_ALLOWED_DOC_TYPES=application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document

# ==========================================
# 业务规则配置
# ==========================================
ALLOWED_EMAIL_DOMAINS=edu.cn
MAX_PAPERS_PER_USER=100
MAX_PAPERS_PER_VIP=-1
MAX_DISCUSSIONS_PER_PAPER=100
MIN_RECHARGE_CREDITS=100

# ==========================================
# 重试配置
# ==========================================
MAX_RETRIES=3
RETRY_DELAY=1000
RETRY_MULTIPLIER=2

# ==========================================
# 日志配置
# ==========================================
LOG_LEVEL=info
LOG_ENABLE_CONSOLE=true
LOG_ENABLE_FILE=false
LOG_FILE_PATH=./logs/app.log

# ==========================================
# 支付配置(预留)
# ==========================================
ALIPAY_APP_ID=
ALIPAY_PRIVATE_KEY=
ALIPAY_PUBLIC_KEY=
ALIPAY_GATEWAY=https://openapi.alipay.com/gateway.do
ALIPAY_NOTIFY_URL=

# 充值套餐配置
PACKAGE_BASIC_CREDITS=1000
PACKAGE_BASIC_PRICE=9.9
PACKAGE_STANDARD_CREDITS=2000
PACKAGE_STANDARD_PRICE=29.9
PACKAGE_PREMIUM_CREDITS=5000
PACKAGE_PREMIUM_PRICE=99.9

# ==========================================
# Redis缓存配置(可选)
# ==========================================
CACHE_ENABLED=false
CACHE_TTL=3600
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
