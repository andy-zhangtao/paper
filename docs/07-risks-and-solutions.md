# é£é™©ä¸åº”å¯¹æ–¹æ¡ˆ

## âš ï¸ äº§å“é£é™©

### é£é™©1: éœ€æ±‚ä¼ªå‘½é¢˜ - ç”¨æˆ·ä¸æ„¿ä»˜è´¹

**é£é™©æè¿°**:
- ChatGPT/Kimiç­‰å…è´¹å·¥å…·å·²èƒ½æ¶¦è‰²è®ºæ–‡
- å¤§å­¦ç”Ÿä»˜è´¹æ„æ„¿ä½
- äº§å“å·®å¼‚åŒ–ä¸è¶³

**éªŒè¯æ–¹æ³•**:
```
MVPä¸Šçº¿åå‰2å‘¨å…³é”®æŒ‡æ ‡:
- æ³¨å†Œç”¨æˆ· >50äºº â†’ æœ‰éœ€æ±‚
- å…è´¹ç§¯åˆ†æ¶ˆè€—ç‡ >80% â†’ åŠŸèƒ½æœ‰ä»·å€¼
- ä»˜è´¹è½¬åŒ–ç‡ >3% â†’ æ„¿æ„ä»˜è´¹
```

**åº”å¯¹æ–¹æ¡ˆ**:

**æ–¹æ¡ˆA: è½¬åŒ–ç‡1-3%ï¼ˆåŠæ ¼çº¿ï¼‰**
- ä¼˜åŒ–å®šä»·ï¼šé™ä½é—¨æ§›è‡³Â¥4.9/500ç§¯åˆ†
- å¢åŠ æ–°æ‰‹ä¼˜æƒ ï¼šé¦–å……åŒå€
- æ”¹è¿›åŠŸèƒ½ï¼šå¢åŠ "æŸ¥é‡æŠ¥å‘Š"ç­‰åˆšéœ€

**æ–¹æ¡ˆB: è½¬åŒ–ç‡<1%ï¼ˆå±é™©ï¼‰**
- ç«‹å³è½¬å‘Bç«¯ï¼šè”ç³»å­¦æ ¡å›¾ä¹¦é¦†/å†™ä½œä¸­å¿ƒ
- æ‰“åŒ…é”€å”®ï¼šÂ¥500/å¹´/å¸­ä½ï¼ˆ50ä¸ªå­¦ç”Ÿèµ·ï¼‰
- æä¾›ç®¡ç†åå°ï¼šè€å¸ˆå¯æŸ¥çœ‹å­¦ç”Ÿå†™ä½œè¿›åº¦

**æ–¹æ¡ˆC: å®Œå…¨æ²¡äººç”¨**
- é¡¹ç›®æš‚åœï¼Œæ­¢æŸ
- æŠ€æœ¯æ ˆå¤ç”¨åˆ°å…¶ä»–æ–¹å‘ï¼ˆå¦‚ç®€å†ä¼˜åŒ–ã€å…¬æ–‡å†™ä½œï¼‰

---

### é£é™©2: å­¦æœ¯è¯šä¿¡äº‰è®®

**é£é™©æè¿°**:
- "AIå†™è®ºæ–‡"è¢«å­¦æ ¡è§†ä¸ºä½œå¼Š
- ç”¨æˆ·æ»¥ç”¨å¯¼è‡´æŠ„è¢­ç‡è¿‡é«˜
- å¹³å°è¢«ä¸¾æŠ¥/å°ç¦

**é¢„é˜²æªæ–½**:

**äº§å“è®¾è®¡å±‚é¢**:
```
âŒ ä¸æä¾›åŠŸèƒ½:
- ä¸€é”®ç”Ÿæˆå…¨æ–‡
- ç›´æ¥æŠ„è¢­æ£€æµ‹ï¼ˆé¿å…å¸®åŠ©ä½œå¼Šï¼‰

âœ… åªæä¾›è¾…åŠ©:
- è¯­æ³•æ£€æŸ¥
- é€»è¾‘å»ºè®®
- è¡¨è¾¾ä¼˜åŒ–
```

**æ³•å¾‹å…è´£**:
```
ç”¨æˆ·åè®®æ˜ç¡®è¯´æ˜:
1. æœ¬å¹³å°ä»…ä¸ºè¾…åŠ©å·¥å…·ï¼Œä¸æ‰¿æ‹…å­¦æœ¯è¯šä¿¡è´£ä»»
2. ç”¨æˆ·éœ€éµå®ˆæ‰€åœ¨å­¦æ ¡çš„å­¦æœ¯è§„èŒƒ
3. AIç”Ÿæˆå†…å®¹ä»…ä¾›å‚è€ƒï¼Œéœ€è‡ªè¡Œæ ¸å®
```

**æŠ€æœ¯é™åˆ¶**:
```typescript
// é™åˆ¶å•æ¬¡ç”Ÿæˆé•¿åº¦
if (text.length > 1000) {
  throw new Error('å•æ¬¡æ¶¦è‰²ä¸è¶…è¿‡1000å­—')
}

// é™é‡åŠŸèƒ½æ·»åŠ æ°´å°ï¼ˆé˜²æ»¥ç”¨ï¼‰
const watermark = `\n\n<!-- æœ¬æ®µç”±AIè¾…åŠ©æ”¹å†™ï¼Œè¯·è‡ªè¡Œå®¡æ ¸ -->\n`
```

---

### é£é™©3: è¢«å¤§å‚é™ç»´æ‰“å‡»

**é£é™©æè¿°**:
- WPS/çŸ³å¢¨æ–‡æ¡£æ¨å‡ºç±»ä¼¼åŠŸèƒ½
- å…è´¹æä¾›ï¼Œç›´æ¥ç¢¾å‹

**åº”å¯¹ç­–ç•¥**:

**çŸ­æœŸï¼ˆ6ä¸ªæœˆå†…ï¼‰**:
- å¿«é€Ÿè¿­ä»£ï¼Œå»ºç«‹ç”¨æˆ·ä¹ æƒ¯
- åšå‚ç›´åœºæ™¯ï¼ˆåªåšå­¦æœ¯è®ºæ–‡ï¼Œä¸åšé€šç”¨æ–‡æ¡£ï¼‰
- ç§¯ç´¯å­¦æœ¯è¯­æ–™åº“ï¼ˆä¸“ä¸šé¢†åŸŸä¼˜åŠ¿ï¼‰

**é•¿æœŸ**:
- è½¬å‘Bç«¯ï¼ˆå­¦æ ¡é‡‡è´­ä¸çœ‹ä»·æ ¼ï¼Œçœ‹æœåŠ¡ï¼‰
- å»ºç«‹æŠ¤åŸæ²³ï¼š
  - è®ºæ–‡æ¨¡æ¿åº“ï¼ˆå„å­¦æ ¡æ ¼å¼ï¼‰
  - å¯¼å¸ˆå®¡é˜…åŠŸèƒ½ï¼ˆå·®å¼‚åŒ–ï¼‰
  - å­¦æœ¯æ•°æ®åº“å¯¹æ¥ï¼ˆçŸ¥ç½‘/ä¸‡æ–¹ï¼‰

---

## ğŸ› ï¸ æŠ€æœ¯é£é™©

### é£é™©4: LLM APIä¸ç¨³å®š

**å¯èƒ½é—®é¢˜**:
- é€šä¹‰åƒé—®æœåŠ¡å®•æœº
- APIé™æµ
- å“åº”è¶…æ—¶

**åº”å¯¹æ–¹æ¡ˆ**:

**å¤šLLMå¤‡ä»½**:
```typescript
class AIService {
  async complete(prompt: string) {
    try {
      // ä¸»åŠ›ï¼šé€šä¹‰åƒé—®
      return await this.tongyi.complete(prompt)
    } catch (err) {
      // å¤‡ç”¨1: æ™ºè°±GLM
      return await this.zhipu.complete(prompt)
    } catch (err) {
      // å¤‡ç”¨2: æœ¬åœ°å°æ¨¡å‹ï¼ˆé™çº§æ–¹æ¡ˆï¼‰
      return await this.localModel.complete(prompt)
    }
  }
}
```

**ç¼“å­˜ç­–ç•¥**:
```typescript
// ç›¸åŒå†…å®¹ç›´æ¥è¿”å›ç¼“å­˜
const cacheKey = md5(text + type)
const cached = await redis.get(`ai:${cacheKey}`)
if (cached) return cached
```

**è¶…æ—¶é‡è¯•**:
```typescript
const result = await pRetry(
  () => tongyi.complete(prompt),
  {
    retries: 3,
    minTimeout: 2000,
    onFailedAttempt: (err) => {
      console.log(`ç¬¬${err.attemptNumber}æ¬¡é‡è¯•...`)
    }
  }
)
```

---

### é£é™©5: å¹¶å‘æ‰£è´¹Bugï¼ˆè¶…å–é—®é¢˜ï¼‰

**åœºæ™¯**:
```
ç”¨æˆ·å‰©ä½™10ç§¯åˆ†
åŒæ—¶å‘èµ·3ä¸ªè¯·æ±‚ï¼ˆæ¯ä¸ªæ¶ˆè€—15ç§¯åˆ†ï¼‰
å¦‚æœæ²¡æœ‰é”ï¼Œå¯èƒ½æ‰£è´¹3æ¬¡ â†’ ä½™é¢å˜æˆ-35
```

**è§£å†³æ–¹æ¡ˆ**:

**åˆ†å¸ƒå¼é”ï¼ˆRedlockç®—æ³•ï¼‰**:
```typescript
async deductCredits(userId: string, amount: number) {
  const lock = await this.redis.lock(
    `lock:credits:${userId}`,
    10000 // é”10ç§’
  )

  try {
    // 1. æŸ¥è¯¢ä½™é¢
    const user = await this.db.users.findOne(userId)

    // 2. æ£€æŸ¥ä½™é¢
    if (user.credits < amount) {
      throw new InsufficientCreditsException()
    }

    // 3. æ‰£è´¹
    await this.db.users.update(userId, {
      credits: user.credits - amount
    })

    // 4. è®°å½•æµæ°´
    await this.db.creditTransactions.create({
      user_id: userId,
      amount: -amount,
      balance_after: user.credits - amount
    })

    // 5. åˆ é™¤ç¼“å­˜
    await this.redis.del(`user:credits:${userId}`)

  } finally {
    await lock.release() // ç¡®ä¿é‡Šæ”¾é”
  }
}
```

**æ•°æ®åº“çº§åˆ«é˜²æŠ¤**:
```sql
-- ä½™é¢ä¸èƒ½ä¸ºè´Ÿ
ALTER TABLE users ADD CONSTRAINT credits_non_negative CHECK (credits >= 0);

-- ä¹è§‚é”ï¼ˆversionå­—æ®µï¼‰
UPDATE users
SET credits = credits - 15, version = version + 1
WHERE id = $1 AND version = $2 AND credits >= 15;
-- å¦‚æœversionä¸åŒ¹é…ï¼Œè¯´æ˜æœ‰å¹¶å‘ä¿®æ”¹ï¼ŒUPDATEå¤±è´¥
```

**å‹åŠ›æµ‹è¯•**:
```bash
# ä½¿ç”¨Apache Benchæµ‹è¯•å¹¶å‘
ab -n 1000 -c 100 -H "Authorization: Bearer <token>" \
   -p polish.json \
   http://localhost:3000/api/ai/polish

# éªŒè¯ï¼š
# 1. æˆåŠŸè¯·æ±‚æ•° * 15 = å®é™…æ‰£é™¤ç§¯åˆ†
# 2. æµæ°´è¡¨è®°å½•æ•° = æˆåŠŸè¯·æ±‚æ•°
# 3. ä½™é¢ä¸ä¸ºè´Ÿæ•°
```

---

### é£é™©6: æ•°æ®åº“æ€§èƒ½ç“¶é¢ˆ

**æ…¢æŸ¥è¯¢åœºæ™¯**:
```sql
-- æŸ¥è¯¢ç”¨æˆ·çš„æ‰€æœ‰è®ºæ–‡ï¼ˆæ•°æ®é‡å¤§æ—¶å˜æ…¢ï¼‰
SELECT * FROM papers WHERE user_id = $1 ORDER BY updated_at DESC;
```

**ä¼˜åŒ–æ–¹æ¡ˆ**:

**1. ç´¢å¼•ä¼˜åŒ–**:
```sql
-- å¤åˆç´¢å¼•
CREATE INDEX idx_papers_user_updated
ON papers(user_id, updated_at DESC)
WHERE is_deleted = FALSE;

-- éƒ¨åˆ†ç´¢å¼•ï¼ˆåªç´¢å¼•æœªåˆ é™¤çš„ï¼‰
CREATE INDEX idx_papers_active
ON papers(user_id)
WHERE is_deleted = FALSE;
```

**2. åˆ†é¡µä¼˜åŒ–**:
```sql
-- âŒ æ…¢æŸ¥è¯¢ï¼ˆOFFSETå¤§æ•°å€¼æ—¶æ‰«æå¾ˆå¤šè¡Œï¼‰
SELECT * FROM papers
WHERE user_id = $1
ORDER BY created_at DESC
OFFSET 10000 LIMIT 10;

-- âœ… æ¸¸æ ‡åˆ†é¡µ
SELECT * FROM papers
WHERE user_id = $1
  AND created_at < $2 -- ä¸Šä¸€é¡µæœ€åä¸€æ¡çš„æ—¶é—´
ORDER BY created_at DESC
LIMIT 10;
```

**3. è¯»å†™åˆ†ç¦»**:
```typescript
// ä¸»åº“ï¼ˆå†™æ“ä½œï¼‰
await masterDB.users.update(userId, { credits: 100 })

// ä»åº“ï¼ˆè¯»æ“ä½œï¼‰
const papers = await slaveDB.papers.find({ user_id: userId })
```

**4. è¿æ¥æ± é…ç½®**:
```typescript
{
  type: 'postgres',
  poolSize: 20, // è¿æ¥æ± å¤§å°
  extra: {
    max: 20,
    min: 5,
    idle: 10000, // ç©ºé—²è¿æ¥10ç§’åé‡Šæ”¾
    acquire: 30000, // è·å–è¿æ¥è¶…æ—¶æ—¶é—´
  }
}
```

---

### é£é™©7: æ”¯ä»˜å›è°ƒä¸¢å¤±

**åœºæ™¯**:
- ç”¨æˆ·ä»˜æ¬¾æˆåŠŸ
- æ”¯ä»˜å®å›è°ƒå› ç½‘ç»œé—®é¢˜æœªåˆ°è¾¾
- ç”¨æˆ·ç§¯åˆ†æœªåˆ°è´¦ â†’ æŠ•è¯‰

**é¢„é˜²æªæ–½**:

**1. ä¸»åŠ¨æŸ¥è¯¢**:
```typescript
// åˆ›å»ºè®¢å•5åˆ†é’Ÿåï¼Œå¦‚æœè¿˜æ˜¯pendingçŠ¶æ€
@Cron('*/5 * * * *') // æ¯5åˆ†é’Ÿæ‰§è¡Œ
async checkPendingOrders() {
  const orders = await this.db.orders.find({
    status: 'pending',
    created_at: { $lt: new Date(Date.now() - 5 * 60 * 1000) }
  })

  for (const order of orders) {
    // ä¸»åŠ¨æŸ¥è¯¢æ”¯ä»˜å®è®¢å•çŠ¶æ€
    const result = await this.alipay.query(order.id)

    if (result.trade_status === 'TRADE_SUCCESS') {
      // è¡¥å•
      await this.processPayment(order.id)
    }
  }
}
```

**2. å¹‚ç­‰æ€§ä¿è¯**:
```typescript
async processPayment(orderId: string) {
  // ä½¿ç”¨åˆ†å¸ƒå¼é”é˜²æ­¢é‡å¤å¤„ç†
  const lock = await redis.lock(`lock:order:${orderId}`)

  try {
    const order = await this.db.orders.findOne(orderId)

    // å·²å¤„ç†è¿‡ï¼Œç›´æ¥è¿”å›
    if (order.status === 'paid') {
      return
    }

    // æ ‡è®°å·²æ”¯ä»˜
    await this.db.orders.update(orderId, {
      status: 'paid',
      paid_at: new Date()
    })

    // ç§¯åˆ†åˆ°è´¦
    await this.creditsService.recharge(
      order.user_id,
      order.credits,
      `å……å€¼Â¥${order.amount_yuan}`
    )

  } finally {
    await lock.release()
  }
}
```

**3. ç”¨æˆ·è‡ªåŠ©æŸ¥è¯¢**:
```typescript
// æä¾›"æœªåˆ°è´¦ï¼Ÿç‚¹å‡»æŸ¥è¯¢"æŒ‰é’®
@Get('orders/:id/check')
async checkOrder(@Param('id') id: string) {
  const result = await this.alipay.query(id)

  if (result.trade_status === 'TRADE_SUCCESS') {
    await this.processPayment(id)
    return { message: 'å·²åˆ°è´¦' }
  }

  return { message: 'æ”¯ä»˜æœªå®Œæˆ' }
}
```

---

## ğŸ’° ä¸šåŠ¡é£é™©

### é£é™©8: LLMæˆæœ¬å¤±æ§

**åœºæ™¯**:
- æ¶æ„ç”¨æˆ·åˆ·æ¥å£
- å®šä»·è¿‡ä½ï¼Œå…¥ä¸æ•·å‡º
- å…è´¹ç§¯åˆ†ç»™å¤ªå¤š

**ç›‘æ§æŒ‡æ ‡**:
```typescript
// æ¯æ—¥æˆæœ¬å‘Šè­¦
@Cron('0 0 * * *') // æ¯å¤©å‡Œæ™¨
async checkDailyCost() {
  const today = new Date().toISOString().slice(0, 10)

  // LLMæˆæœ¬
  const llmCost = await this.db.aiLogs.sum('cost_yuan', {
    created_at: { $gte: today }
  })

  // è¥æ”¶
  const revenue = await this.db.orders.sum('amount_yuan', {
    status: 'paid',
    paid_at: { $gte: today }
  })

  const costRatio = llmCost / revenue

  if (costRatio > 0.3) {
    // æˆæœ¬è¶…è¿‡è¥æ”¶30%
    await this.alert('æˆæœ¬é¢„è­¦ï¼', {
      llmCost,
      revenue,
      ratio: costRatio
    })

    // è‡ªåŠ¨é™æµ
    await this.enableRateLimit()
  }
}
```

**åº”å¯¹æªæ–½**:

**ç«‹å³é™æµ**:
```typescript
// å…è´¹ç”¨æˆ·æ¯å¤©é™10æ¬¡AIè°ƒç”¨
@UseGuards(DailyLimitGuard)
@Post('ai/polish')
async polish() {}

// å®ç°
class DailyLimitGuard implements CanActivate {
  async canActivate(context: ExecutionContext) {
    const user = context.switchToHttp().getRequest().user

    const todayCount = await redis.get(`daily:${user.id}`)

    if (!user.is_vip && todayCount >= 10) {
      throw new RateLimitException('ä»Šæ—¥å…è´¹æ¬¡æ•°å·²ç”¨å®Œ')
    }

    await redis.incr(`daily:${user.id}`)
    await redis.expire(`daily:${user.id}`, 86400)

    return true
  }
}
```

**è°ƒæ•´å®šä»·**:
```typescript
// æˆæœ¬å€’æ¨å®šä»·
const avgTokens = 2000 // å¹³å‡æ¯æ¬¡æ¶ˆè€—
const apiCost = avgTokens * 0.00002 // Â¥0.04
const targetMargin = 0.8 // ç›®æ ‡80%æ¯›åˆ©

const price = apiCost / (1 - targetMargin) // Â¥0.2
const credits = Math.ceil(price / 0.02) // 10ç§¯åˆ†

// å¦‚æœäºæŸï¼Œæé«˜åˆ°15ç§¯åˆ†
```

---

### é£é™©9: ç”¨æˆ·è–…ç¾Šæ¯›

**æ‰‹æ®µ**:
- æ‰¹é‡æ³¨å†Œè´¦å·é¢†100ç§¯åˆ†
- åˆ·é‚€è¯·å¥–åŠ±
- æ¶æ„é€€æ¬¾

**é˜²å¾¡æ–¹æ¡ˆ**:

**1. æ³¨å†Œé™åˆ¶**:
```typescript
// æ‰‹æœºéªŒè¯ç 
@Post('auth/send-code')
async sendCode(@Body('phone') phone: string) {
  // åŒæ‰‹æœºå·æ¯å¤©é™5æ¬¡
  const count = await redis.get(`sms:${phone}`)
  if (count >= 5) throw new Error('ä»Šæ—¥éªŒè¯ç æ¬¡æ•°å·²è¾¾ä¸Šé™')

  // å‘é€éªŒè¯ç 
  await sms.send(phone, code)
  await redis.setex(`sms:${phone}`, 86400, count + 1)
}

// åŒIPé™åˆ¶
@Post('auth/register')
@Throttle(3, 86400) // æ¯å¤©é™3æ¬¡
async register() {}
```

**2. è®¾å¤‡æŒ‡çº¹**:
```typescript
// å‰ç«¯æ”¶é›†
import FingerprintJS from '@fingerprintjs/fingerprintjs'

const fp = await FingerprintJS.load()
const result = await fp.get()
const deviceId = result.visitorId

// åç«¯éªŒè¯
const deviceCount = await db.users.count({ device_id: deviceId })
if (deviceCount >= 3) {
  throw new Error('è¯¥è®¾å¤‡æ³¨å†Œè´¦å·è¿‡å¤š')
}
```

**3. é‚€è¯·é™åˆ¶**:
```typescript
// è¢«é‚€è¯·äººå¿…é¡»æœ‰å®é™…æ¶ˆè´¹æ‰ç»™å¥–åŠ±
async redeemInvite(userId: string, code: string) {
  const inviter = await db.users.findOne({ invite_code: code })

  // è®°å½•é‚€è¯·å…³ç³»
  await db.invites.create({
    inviter_id: inviter.id,
    invitee_id: userId,
    status: 'pending' // å¾…æ¿€æ´»
  })

  // è¢«é‚€è¯·äººå…ˆå¾—50ç§¯åˆ†
  await this.credits.reward(userId, 50, 'é‚€è¯·å¥–åŠ±')
}

// è¢«é‚€è¯·äººé¦–æ¬¡å……å€¼åï¼Œé‚€è¯·äººæ‰å¾—100ç§¯åˆ†
async onFirstRecharge(userId: string) {
  const invite = await db.invites.findOne({
    invitee_id: userId,
    status: 'pending'
  })

  if (invite) {
    await this.credits.reward(invite.inviter_id, 100, 'é‚€è¯·è¿”åˆ©')
    await db.invites.update(invite.id, { status: 'activated' })
  }
}
```

---

### é£é™©10: æ•°æ®æ³„éœ²

**æ•æ„Ÿæ•°æ®**:
- ç”¨æˆ·è®ºæ–‡å†…å®¹
- è´¦å·å¯†ç 
- æ”¯ä»˜ä¿¡æ¯

**é˜²æŠ¤æªæ–½**:

**1. åŠ å¯†å­˜å‚¨**:
```typescript
// è®ºæ–‡å†…å®¹åŠ å¯†ï¼ˆå¯é€‰ï¼‰
import { createCipheriv, createDecipheriv } from 'crypto'

class PaperService {
  encrypt(content: string): string {
    const cipher = createCipheriv('aes-256-gcm', key, iv)
    return cipher.update(content, 'utf8', 'hex') + cipher.final('hex')
  }

  decrypt(encrypted: string): string {
    const decipher = createDecipheriv('aes-256-gcm', key, iv)
    return decipher.update(encrypted, 'hex', 'utf8') + decipher.final('utf8')
  }
}
```

**2. æƒé™æ§åˆ¶**:
```sql
-- æ•°æ®åº“åªè¯»è´¦å·ï¼ˆç»™ç›‘æ§ç³»ç»Ÿç”¨ï¼‰
CREATE USER readonly WITH PASSWORD 'xxx';
GRANT SELECT ON ALL TABLES IN SCHEMA public TO readonly;

-- åº”ç”¨è´¦å·ï¼ˆç¦æ­¢DROP/TRUNCATEï¼‰
CREATE USER appuser WITH PASSWORD 'xxx';
GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES TO appuser;
```

**3. æ—¥å¿—è„±æ•**:
```typescript
// ä¸è®°å½•å®Œæ•´è®ºæ–‡å†…å®¹
await logger.info('ç”¨æˆ·æ¶¦è‰²', {
  user_id: userId,
  text_preview: text.slice(0, 50) + '...', // åªè®°å½•å‰50å­—
  word_count: text.length
})
```

**4. HTTPSå¼ºåˆ¶**:
```nginx
# Nginxé…ç½®
server {
  listen 80;
  server_name api.yourproject.com;
  return 301 https://$host$request_uri; # å¼ºåˆ¶è·³è½¬HTTPS
}
```

---

## ğŸš¨ åº”æ€¥é¢„æ¡ˆ

### æœåŠ¡å™¨å®•æœº
```bash
# 1. ç«‹å³åˆ‡æ¢åˆ°å¤‡ç”¨æœåŠ¡å™¨
# DNSæ”¹åˆ°å¤‡ç”¨IP

# 2. æ•°æ®æ¢å¤
pg_restore -d paper_db /backup/latest.sql

# 3. å‘å…¬å‘Š
echo "æœåŠ¡æ­£åœ¨æ¢å¤ï¼Œé¢„è®¡10åˆ†é’Ÿå†…æ¢å¤" | mail -s "ç´§æ€¥é€šçŸ¥" users@list
```

### æ•°æ®åº“è¯¯åˆ 
```sql
-- è½¯åˆ é™¤è®¾è®¡ï¼Œå¯æ¢å¤
UPDATE papers SET is_deleted = FALSE WHERE id = $1;

-- å¦‚æœçœŸçš„DELETEäº†ï¼Œä»å¤‡ä»½æ¢å¤
pg_restore -t papers -d paper_db /backup/yesterday.sql
```

### æ¶æ„æ”»å‡»
```bash
# å°ç¦IP
iptables -A INPUT -s 123.45.67.89 -j DROP

# é™æµ
# Nginxé…ç½®
limit_req_zone $binary_remote_addr zone=api:10m rate=10r/s;
limit_req zone=api burst=20;
```

---

## ğŸ“Š é£é™©ä¼˜å…ˆçº§

| é£é™© | æ¦‚ç‡ | å½±å“ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| éœ€æ±‚ä¼ªå‘½é¢˜ | é«˜ | è‡´å‘½ | P0 |
| å¹¶å‘æ‰£è´¹Bug | é«˜ | é«˜ | P0 |
| LLMæˆæœ¬å¤±æ§ | ä¸­ | é«˜ | P1 |
| å­¦æœ¯è¯šä¿¡äº‰è®® | ä¸­ | é«˜ | P1 |
| æ”¯ä»˜å›è°ƒä¸¢å¤± | ä½ | é«˜ | P1 |
| æ•°æ®åº“æ€§èƒ½ | ä¸­ | ä¸­ | P2 |
| ç”¨æˆ·è–…ç¾Šæ¯› | ä¸­ | ä¸­ | P2 |
| LLM APIä¸ç¨³å®š | ä½ | ä¸­ | P2 |
| æ•°æ®æ³„éœ² | ä½ | è‡´å‘½ | P1 |

**P0ï¼ˆç«‹å³å¤„ç†ï¼‰**: MVPé˜¶æ®µå¿…é¡»è§£å†³
**P1ï¼ˆé‡ç‚¹å…³æ³¨ï¼‰**: ä¸Šçº¿å‰å¿…é¡»æœ‰é¢„æ¡ˆ
**P2ï¼ˆç›‘æ§å³å¯ï¼‰**: ä¸Šçº¿åæ ¹æ®æƒ…å†µä¼˜åŒ–
